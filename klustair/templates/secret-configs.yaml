apiVersion: v1
kind: Secret
metadata:
  name: {{ include "klustair.fullname" . }}-configs
  labels:
{{ include "klustair.labels" . | indent 4 }}
#  annotations:
#    "helm.sh/hook": "pre-install"
#    "helm.sh/hook-delete-policy": "before-hook-creation"
data:
  {{- if .Values.klustairJob.kubeconfig -}}
  "kube.config": {{ .Values.klustairJob.kubeconfig | b64enc | quote }}
  {{ end -}}
  {{- if .Values.trivy.repoCredentials -}}
  "repo-credentials.json": {{ .Values.trivy.repoCredentials | b64enc | quote }}
  {{ end -}}
  {{- if .Values.klustairJob.gcloudCredentials -}}
  "gcloud-credentials.json": {{ .Values.klustairJob.gcloudCredentials | b64enc | quote }}
  {{ end -}}